<!DOCTYPE html>
<html>
    <body style="margin: 0px;overflow: hidden;">
        <canvas id="canvas"></canvas>
    </body>
</html>
<script src="./perlin.js"></script>
<script>

const SQUARE_SIZE_PIXELS = 10;
const TOPO_DIVISION = .25;
var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");

function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas, false);


topoSeed = Math.random();
redSeed = Math.random();
greenSeed = Math.random();
blueSeed = Math.random();

function scale(noiseNum) {
    return Math.floor((noiseNum + 1) * 128);
}

function paint() {
    var height = window.innerHeight/SQUARE_SIZE_PIXELS + 1;
    var width = window.innerWidth/SQUARE_SIZE_PIXELS + 1;
    var time = new Date().getTime() / 7000;
    for(i = 0; i < width; i++) {
        for(j = 0; j < height; j++) {
            noise.seed(topoSeed);
            var value = noise.simplex3(i / 100, j / 100, time);
            if(Math.abs(value % TOPO_DIVISION) > TOPO_DIVISION/2) {
                noise.seed(redSeed);
                red = scale(noise.simplex3(i / 100, j / 100, time));
                noise.seed(greenSeed);
                green = scale(noise.simplex3(i / 100, j / 100, time));
                noise.seed(blueSeed);
                blue = scale(noise.simplex3(i / 100, j / 100, time));
                ctx.fillStyle = 'rgb('+red+', '+green+', '+blue+')';
            } else {
                ctx.fillStyle = "#FFFFFF";
            }
            ctx.fillRect(i * SQUARE_SIZE_PIXELS, j * SQUARE_SIZE_PIXELS, SQUARE_SIZE_PIXELS ,SQUARE_SIZE_PIXELS);
        }
    }
    setTimeout(paint, 35);
}

paint();

</script>